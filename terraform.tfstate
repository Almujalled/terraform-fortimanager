{
  "version": 4,
  "terraform_version": "1.2.5",
  "serial": 1504,
  "lineage": "11bc1d59-a8af-6a0b-912b-36b0d7ee8fee",
  "outputs": {
    "test1": {
      "value": {
        "result": [
          {
            "data": {
              "name": "UpdatedFromTerra"
            },
            "status": {
              "code": 0,
              "message": "OK"
            },
            "url": "/dvmdb/adom/GNS3/device/UpdatedFromTerra"
          }
        ]
      },
      "type": [
        "object",
        {
          "result": [
            "tuple",
            [
              [
                "object",
                {
                  "data": [
                    "object",
                    {
                      "name": "string"
                    }
                  ],
                  "status": [
                    "object",
                    {
                      "code": "number",
                      "message": "string"
                    }
                  ],
                  "url": "string"
                }
              ]
            ]
          ]
        }
      ]
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "fortimanager_dvm_cmd_add_device",
      "name": "authDevice",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "device": [
              {
                "adm_pass": "",
                "adm_usr": "admin",
                "desc": "",
                "deviceaction": "promote_unreg",
                "deviceblueprint": "",
                "fazquota": 0,
                "ip": "",
                "metafields": "",
                "metafields_map": {},
                "mgmt_mode": "",
                "mr": 0,
                "name": "FortiGate-VM64-KVM",
                "os_type": "",
                "os_ver": "",
                "patch": 0,
                "platform_str": "FortiGate-VM64-KVM",
                "sn": "FGVMEVXBBRNCNREF"
              }
            ],
            "dynamic_sort_subtable": "false",
            "flags": [
              "create_task"
            ],
            "fmgadom": "GNS3",
            "force_recreate": null,
            "groups": [],
            "id": "DvmCmdAddDevice"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockROOT",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_dvm_cmd_update_device",
      "name": "refreshDevice",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "device": "UpdatedFromTerra",
            "flags": [
              "create_task",
              "nonblocking"
            ],
            "fmgadom": "GNS3",
            "force_recreate": null,
            "id": "DvmCmdUpdateDevice"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_exec_workspace_action",
      "name": "lockGNS3",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lockbegin",
            "adom": "GNS3",
            "comment": "",
            "force_recreate": "4b758f76-21d1-69a4-3200-4f315d6cdf20",
            "id": "workspaceactionadom.GNS3lock",
            "param": "",
            "scopetype": "adom",
            "target": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_exec_workspace_action",
      "name": "lockROOT",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lockbegin",
            "adom": "root",
            "comment": "",
            "force_recreate": "3c290b0b-ad61-668a-7a3d-609048a4b386",
            "id": "workspaceactionadom.rootlock",
            "param": "",
            "scopetype": "adom",
            "target": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_exec_workspace_action",
      "name": "unlockGNS3",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lockend",
            "adom": "GNS3",
            "comment": "",
            "force_recreate": "fb76ab12-fd00-0887-3d46-95d617651084",
            "id": "workspaceactionadom.GNS3unlock",
            "param": "",
            "scopetype": "adom",
            "target": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_json_generic_api.updateDeviceDB",
            "fortimanager_object_cli_templategroup.Edge-Template",
            "fortimanager_object_cli_templategroup.Hub-Template"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_exec_workspace_action",
      "name": "unlockROOT",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "fortimanager_json_generic_api",
      "name": "updateDeviceDB",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "comment": null,
            "force_recreate": null,
            "id": "JSONRPC-Requst-57e651aa-ccd3-4824-b6fb-da4c20a6079f",
            "json_content": "{\n  \"method\": \"update\",\n  \"params\": [\n    {\n      \"data\": {\n        \"adm_pass\": \"\",\n        \"adm_usr\": \"admin\",\n        \"desc\": \"This is updated from Terrafrom using an API!\",\n        \"latitude\": 60.37309404359674,\n        \"longitude\": 5.33920881412722,\n        \"meta fields\": {\n          \"Address\": \"Fj√∏sangerveien 65\",\n          \"Company/Organization\": \"Eviny Digital AS\",\n          \"Contact Email\": \"ghaith.almujalled@verja.no\",\n          \"Contact Phone Number\": \"+4745402619\"\n        },\n        \"name\": \"UpdatedFromTerra\"\n      },\n      \"url\": \"/dvmdb/adom/GNS3/device/UpdatedFromTerra\"\n    }\n  ]\n}\n",
            "response": "{ \"result\": [ { \"data\": { \"name\": \"UpdatedFromTerra\" }, \"status\": { \"code\": 0, \"message\": \"OK\" }, \"url\": \"\\/dvmdb\\/adom\\/GNS3\\/device\\/UpdatedFromTerra\" } ] }"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_dvm_cmd_update_device.refreshDevice",
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Edge-Overlay",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "02-Edge-Overlay",
            "modification_time": "",
            "name": "02-Edge-Overlay",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 02-Edge-Overlay.j2                                                         #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n\n{% for h in project.regions[region].hubs %}\n{% set hubloop = loop %}\n{% set ol_tunnels = [] %}\n{% for i in project.profiles[profile].interfaces if i.role == 'wan' and i.name is defined %}\n  {# Track generated tunnels, to handle duplicates by adding extra index as a suffix #}\n  {% set ul_name = i.ul_name~\"-\" if i.ul_name is defined else \"\" %}\n  {% set ol_tun = ul_name~\"H\"~hubloop.index~\"_\"~i.ol_type %}\n  {% set count = ol_tunnels|select(\"equalto\", ol_tun)|list|count %}\n  {# Tunnel name = 'H\u003chub_number\u003e_\u003col_type\u003e' if no duplicates, otherwise 'H\u003chub_number\u003e_\u003col_type\u003e_\u003cindex\u003e' #}\n  {% set ol_tun_name = ol_tun if not count else ol_tun~'_'~(count+1) %}\n  {{ ol_tunnels.append(ol_tun) or \"\" }}\nconfig vpn ipsec phase1-interface\n  edit \"{{ ol_tun_name }}\"\n    set interface \"{{ i.name }}\"\n    set ike-version 2\n    {% if project.cert_auth|default(true) %}\n    set authmethod signature\n    set certificate \"{{ project.edge_cert_template|default('Edge') }}\"\n    {% else %}\n    set psksecret {{ project.psk|default('S3cr3t!') }}\n    {% endif %}\n    set keylife 28800\n    set peertype any\n    set net-device enable\n    set proposal aes256gcm-prfsha256 aes256-sha256\n    set idle-timeout enable\n    {% if project.intrareg_advpn|default(true) %}\n    set auto-discovery-receiver enable\n    set add-route disable\n    {% else %}\n    set auto-discovery-receiver disable    \n    set exchange-interface-ip enable\n    {% endif %}    \n    set encapsulation vpn-id-ipip\n    set exchange-ip-addr4 {{ loopback|ipaddr('address') }}\n    set network-overlay enable\n    set network-id {{ project.hubs[h].overlays[i.ol_type].network_id }}\n    set remote-gw {{ project.hubs[h].overlays[i.ol_type].wan_ip }}\n    set dpd-retrycount 3\n    set dpd-retryinterval 5\n    set dpd on-idle\n  next\nend\nconfig vpn ipsec phase2-interface\n  edit \"{{ ol_tun_name }}\"\n    set phase1name \"{{ ol_tun_name }}\"\n    set proposal aes256gcm\n    set keepalive enable\n    set keylifeseconds 3600\n  next\nend\nconfig system interface\n  edit \"{{ ol_tun_name }}\"\n    set vrf {{ pe_vrf }}\n  next\nend\n{% endfor %}\n{% endfor %}\n",
            "type": "jinja",
            "variables": [
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Edge-Routing",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "03-Edge-Routing",
            "modification_time": "",
            "name": "03-Edge-Routing",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 03-Edge-Routing.j2                                                         #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n{% set vrf_rt_as = project.vrf_rt_as|default('65000') %}\n\nconfig router route-map\n  {% for i in range(1,3) %}\n  edit \"H{{loop.index}}_TAG\"\n    config rule\n      edit 1\n        set set-tag {{ loop.index }}\n      next\n    end\n  next\n  {% endfor %}\n  edit \"SLA_OK\"\n    config rule\n      edit 1\n        set set-community \"{{ project.regions[region].as }}:99\"\n      next\n    end\n  next\nend\n\nconfig router bgp\n  set as {{ project.regions[region].as }}\n  set router-id {{ loopback|ipaddr('address') }}\n  set keepalive-timer 15\n  set holdtime-timer 45\n  set ibgp-multipath enable\n  set recursive-next-hop enable\n  set tag-resolve-mode merge\n  config neighbor\n    {% for h in project.regions[region].hubs %}\n    edit {{ project.hubs[h].lo_bgp }}\n      set soft-reconfiguration enable\n      set soft-reconfiguration-vpnv4 enable\n      set advertisement-interval 1\n      set interface \"Lo\"\n      set update-source \"Lo\"\n      set connect-timer 1\n      set remote-as {{ project.regions[region].as }}\n      set route-map-in \"H{{loop.index}}_TAG\"\n      set route-map-in-vpnv4 \"H{{loop.index}}_TAG\"\n      set route-map-out-vpnv4-preferable \"SLA_OK\"\n    next\n    {% endfor %}\n  end\n  config network\n    {% set network_to_advertise = [] %}\n    {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined and i.advertise|default(true) %}\n      {% if not i.ip in network_to_advertise %}\n        {{ network_to_advertise.append(i.ip) or \"\" }}\n      {% endif %}\n    {% endfor %}\n\n    {% for i in network_to_advertise if i|length %}\n      edit {{ loop.index }}\n        set prefix {{ i|ipaddr(0) }}\n      next\n    {% endfor %}\n    end\n  config vrf\n    edit \"{{ pe_vrf }}\"\n      set role pe\n    next\n    {% for i in project.profiles[profile].interfaces if i.vrf is defined and i.name is defined %}\n    edit \"{{ i.vrf }}\"\n      set role \"ce\"\n      set rd \"{{ vrf_rt_as }}:{{ i.vrf }}\"\n      set import-rt \"{{ vrf_rt_as }}:{{ i.vrf }}\"\n      set export-rt \"{{ vrf_rt_as }}:{{ i.vrf }}\"\n    next\n    {% endfor %}\n  end\nend\n",
            "type": "jinja",
            "variables": [
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Edge-Underlay",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "01-Edge-Underlay",
            "modification_time": "",
            "name": "01-Edge-Underlay",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 01-Edge-Underlay.j2                                                        #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n{% set vrf_leak_summary = project.vrf_leak_summary|default('10.200.255.0/24') %}\n\n{# General settings #}\nconfig system settings\n  set location-id {{ loopback|ipaddr('address') }}\n  set allow-subnet-overlap enable\nend\nconfig system global\n  {% if not project.profiles[profile].ha|default(false) and hostname is defined %}\n  set hostname {{ hostname }}\n  {% endif %}\nend\n\n{# Loop: Configure underlay interfaces #}\n{% for i in project.profiles[profile].interfaces if i.name is defined %}\nconfig system interface\n  edit \"{{i.name}}\"\n    {# IP #}\n    {% if i.ip is defined %}\n    {% if i.ip == 'dhcp' %}\n    set mode dhcp\n    {%  else %}\n    set mode static\n    set ip {{ i.ip }}\n    {% endif %}\n    {% endif %}\n\n    {# VRF #}\n    {% if i.vrf is defined %}\n    set vrf {{ i.vrf }}\n    {% else %}\n    set vrf {{ pe_vrf }}\n    {% endif %}\n\n    {# VLAN #}\n    {% if i.vlanid is defined and i.parent is defined %}\n    set vdom \"root\"\n    set type vlan\n    set vlanid {{ i.vlanid }}\n    set interface {{ i.parent }}\n    {% endif %}\n\n    {# FEX #}\n    {% if i.fex|default(false) %}\n    set type fext-wan\n    {% endif %}       \n\n    {# QoS: Add shaping profile and in/outbandwidth only if interface is of type wan and meta fields are both defined #}\n    {% if i.role == 'wan' and i.outbandwidth is defined %}\n    set estimated-upstream-bandwidth {{ i.outbandwidth }}\n      {% if i.shaping_profile is defined %}\n      set outbandwidth {{ i.outbandwidth }}\n      set egress-shaping-profile {{ i.shaping_profile }}\n      {% endif %}\n    {% endif %}\n    {% if i.role == 'wan' and i.inbandwidth is defined %}\n    set estimated-downstream-bandwidth {{ i.inbandwidth }}\n      {% if i.shaping_profile is defined %}\n      set inbandwidth {{ i.inbandwidth }}\n      set ingress-shaping-profile {{ i.shaping_profile }}\n      {% endif %}\n    {% endif %}\n\n    {# Other settings #}\n    {% if i.role == 'wan' %}\n    set role wan\n    {% endif %}\n    {% if i.role == 'lan' %}\n    set role lan\n    set device-identification enable\n    {% endif %}\n    set allowaccess {{ 'ping' if not i.access|default(false) else i.access }}\n  next\nend\n\n{# Configure FEX parent interface #}\n{% if i.fex|default(false) %}\nconfig system interface\n  edit {{ i.parent }}\n    set mode dhcp\n    set allowaccess ping fabric\n    set monitor-bandwidth enable\n    set role wan\n    unset lldp-reception      \n  next\nend\n{% endif %}\n\n{# VRF Leak #}\n{% if i.vrf is defined and i.allow_dia|default(false) %}\n  {# Configure software vdom-link interface if model is VM #}\n  {% if i.leak_npu_link|default('') == '' %}\n  config system vdom-link\n    edit \"vrf{{ i.vrf }}_leak\"\n    next\n  end\n  config system interface\n    edit \"vrf{{ i.vrf }}_leak0\"\n      set type vdom-link\n      set vrf {{ pe_vrf }}\n      set vdom 'root'\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n    edit \"vrf{{ i.vrf }}_leak1\"\n      set type vdom-link\n      set vrf {{ i.vrf }}\n      set vdom 'root'\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n  end\n  {# Configure vlan interfaces on top of npu link if model is HW #}\n  {% else %}\n  config system interface\n    edit \"vrf{{ i.vrf }}_leak0\"\n      set type vlan\n      set vlanid {{ 4000 + i.vrf }}\n      set interface \"{{i.leak_npu_link}}0\"\n      set vrf {{ pe_vrf }}\n      set vdom 'root'\n      set mode static\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n    edit \"vrf{{ i.vrf }}_leak1\"\n      set type vlan\n      set vlanid {{ 4000 + i.vrf }}\n      set interface \"{{i.leak_npu_link}}1\"\n      set vrf {{ i.vrf }}\n      set vdom 'root'\n      set mode static\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n  end\n  {% endif %}\n\n  {# Add default route to pe_vrf for each vrf #}\n  config router static\n    edit {{ 10000 + i.vrf }}\n      set gateway {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}\n      set device vrf{{ i.vrf }}_leak1\n    next\n  end\n\n  {# Configure a zone for easier policy management of vrf leaking #}\n  {% if project.create_vrf_leak_zone|default(true) and i.role == 'lan' %}\n  config system zone\n    edit \"{{ project.pevrf_leak_zone|default('pevrf_leak_zone') }}\"\n      append interface \"vrf{{ i.vrf }}_leak0\"\n    next\n    edit \"{{ project.vrf_leak_zone|default('vrfs_leak_zone') }}\"\n      append interface \"vrf{{ i.vrf }}_leak1\"\n    next\n  end\n  {% endif %}\n{% endif %}\n\n{# End Loop: Configure underlay interfaces #}\n{% endfor %}\n\n{# Main Loopback #}\nconfig system interface\n  edit \"Lo\"\n    set vdom \"root\"\n    set type loopback\n    set vrf {{ pe_vrf }}\n    set ip {{ loopback|ipaddr('address') }}/32\n    set allowaccess ping\n  next\nend\n\n{# Create LAN Zone #}\n{% set lan_intf = [] %}\n{% if project.create_lan_zone|default(true) %}\nconfig system zone\n  edit \"{{ project.lan_zone|default('lan_zone') }}\"\n    {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined %}\n    {{  lan_intf.append(i.name) or \"\" }}\n    {% endfor %}\n    set interface {{ lan_intf|join(' ') }}\n  next\nend\n{% endif %}\n\n{# Support SD-Branch (Fortilink interface) #}\n{% set fortilink_intf = [] %}\n{% for i in project.profiles[profile].interfaces if i.role == 'sd_branch' and i.name is defined %}\n{{  fortilink_intf.append(i.name) or \"\" }}\n{% endfor %}\n{% if fortilink_intf %}\nconfig system global\n  set switch-controller enable\nend\nconfig system interface\n  edit \"fortilink\"\n    set member {{ fortilink_intf|join(' ') }}\n  next\nend\n{% endif %}\n\n{# Enable DHCP Server on LAN interfaces #}\n{% if project.create_lan_dhcp_server|default(true) %}\nconfig system dhcp server\n  {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined %}\n  {% if i.dhcp_server|default(true) %}\n  edit {{ 10 + loop.index0 }}\n    set dns-service default\n    set default-gateway {{ i.ip|ipaddr('address') }}\n    set netmask {{ i.ip|ipaddr('netmask') }}\n    set interface {{ i.name }}\n    config ip-range\n      edit 1\n        set start-ip {{ i.ip|ipaddr(4)|ipaddr('address') }}\n        set end-ip {{ i.ip|ipaddr(-5)|ipaddr('address') }}\n      next\n    end\n  next\n  {% endif %}\n  {% endfor %}\nend\n{% endif %}\n",
            "type": "jinja",
            "variables": [
              "hostname",
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Hub-MultiRegion",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "04-Hub-MultiRegion",
            "modification_time": "",
            "name": "04-Hub-MultiRegion",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 04-Hub-MultiRegion.j2                                                      #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set hub2hub_ol = [] %}\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n\n{% if project.regions|count \u003e 1  %}\n\n{% for i in project.profiles[profile].interfaces if i.role == 'wan' and i.name is defined %}\n  {% for r in project.regions if r != region %}\n    {% for h in project.regions[r].hubs %}\n      {% if i.ol_type in project.hubs[h].overlays %}\n      config vpn ipsec phase1-interface\n        edit \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set interface \"{{ i.name }}\"\n          set ike-version 2\n          {% if project.cert_auth|default(true) %}\n          set authmethod signature\n          set certificate \"{{ project.edge_cert_template|default('Hub') }}\"\n          {% else %}\n          set psksecret {{ project.psk|default('S3cr3t!') }}\n          {% endif %}\n          set keylife 28800\n          set peertype any\n          set proposal aes256gcm-prfsha256\n          {% if project.multireg_advpn|default(false) %}\n          set auto-discovery-sender enable\n          set auto-discovery-receiver enable\n          set auto-discovery-forwarder enable\n          set add-route disable\n          {% else %}\n          set exchange-interface-ip enable\n          {% endif %}\n          set remote-gw {{ project.hubs[h].overlays[i.ol_type].wan_ip }}\n          set encapsulation vpn-id-ipip\n          set exchange-ip-addr4 {{ loopback|ipaddr('address') }}\n          set dpd-retrycount 3\n          set dpd-retryinterval 5\n          set dpd on-idle\n        next\n      end\n      config vpn ipsec phase2-interface\n        edit \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set phase1name \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set proposal aes256gcm\n          set keepalive enable\n          set keylifeseconds 3600\n        next\n      end\n      config system interface\n        edit \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set vrf {{ pe_vrf }}\n        next\n      end\n      {% if project.overlay_stickiness|default(true) %}\n      config router policy\n        edit {{ hub2hub_ol|length * 2 + 11 }}\n          set input-device \"EDGE_{{ i.ol_type }}\"\n          set output-device \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set dst {{ project.lan_summary }}\n        next\n        edit {{ hub2hub_ol|length * 2 + 12 }}\n          set input-device \"{{ r|upper }}_H{{ loop.index}}_{{ i.ol_type }}\"\n          set output-device \"EDGE_{{ i.ol_type }}\"\n          set dst {{ project.lan_summary }}\n        next\n      end\n      {% endif %}\n      {{ hub2hub_ol.append(r|upper~'_H'~loop.index~'_'~i.ol_type) or \"\" }}\n      {% endif %}\n    {% endfor %}\n  {% endfor %}\n{% endfor %}\n\n{% if project.create_hub2hub_zone|default(true) %}\nconfig system zone\n  edit \"{{project.hub2hub_zone|default('hub2hub_overlay')}}\"\n    append interface {{ hub2hub_ol|join(' ') }}\n  next\nend\n{% endif %}\n\n{% if project.multireg_advpn|default(false) %}\n{# Advertise loopback summaries between the regions #}\nconfig router access-list\n  {# Regional loopback summary #}\n  edit \"LO_REGIONAL_SUMMARY\"\n    config rule\n      edit 1\n        set prefix {{ project.regions[region].lo_summary }}\n        set exact-match enable\n      next\n    end\n  next\nend\nconfig router route-map\n  edit \"HUB2HUB_OUT\"\n    config rule\n      edit 1\n        {# Do not readvertise regional loopback summary to remote Edges and other regions #}\n        set match-ip-address \"LO_REGIONAL_SUMMARY\"\n        set set-community no-advertise\n      next\n      edit 100\n      next\n    end\n  next\n  edit \"EDGE_OUT\"\n    config rule\n      edit 1\n        {# Do not advertise regional loopback summary to Edges (they already receive global summary) #}\n        set match-ip-address \"LO_REGIONAL_SUMMARY\"\n        set action deny\n      next\n      edit 100\n      next\n    end\n  next\nend\nconfig router bgp\n  config neighbor-group\n    edit \"EDGE\"\n      set route-map-out EDGE_OUT\n      {# Preserve next-hop of prefixes coming from remote regions #}\n      set attribute-unchanged-vpnv4 next-hop\n    next\n  end\n  config network\n    edit 103\n      set prefix {{ project.regions[region].lo_summary }}\n    next\n  end\nend\nconfig router static\n  edit 103\n    set dst {{ project.regions[region].lo_summary }}\n    set blackhole enable\n    set vrf \"{{ pe_vrf }}\"\n    set comment \"Regional loopback summary\"\n  next\nend\n{% else %}\n{# Advertise regional LAN summaries between the regions #}\nconfig router static\n  {% for v in project.regions[region].vrfs %}\n  edit {{ 110 + v.id }}\n    set dst {{ v.lan_summary }}\n    set blackhole enable\n    set vrf \"{{ v.id }}\"\n    set comment \"Regional LAN summary (VRF={{ v.id }})\"\n  next\n  {% endfor %}\nend\nconfig router access-list\n  edit \"LAN_REGIONAL_SUMMARY\"\n    config rule\n      {% for v in project.regions[region].vrfs %}\n      edit {{ v.id }}\n        set prefix {{ v.lan_summary }}\n        set exact-match enable\n      next\n      {% endfor %}\n    end\n  next\nend\nconfig router route-map\n  edit \"HUB2HUB_OUT\"\n    config rule\n      edit 1\n        set match-ip-address \"LAN_REGIONAL_SUMMARY\"\n        unset set-community\n      next\n      edit 1000\n        set action deny\n      next\n    end\n  next\nend\nconfig router bgp\n  config redistribute \"static\"\n    set status enable\n    set route-map \"HUB2HUB_OUT\"\n  end\nend\n{% endif %}\n\nconfig router bgp\n  config neighbor\n    {% for r in project.regions if r != region %}\n    {% for h in project.regions[r].hubs %}\n    edit {{ project.hubs[h].lo_bgp }}\n      set ebgp-enforce-multihop enable\n      set soft-reconfiguration enable\n      set advertisement-interval 1\n      set link-down-failover enable\n      set interface \"Lo\"\n      set update-source \"Lo\"\n      {% if project.multireg_advpn|default(false) %}\n      set attribute-unchanged-vpnv4 next-hop\n      set route-map-out \"HUB2HUB_OUT\"\n      {% else %}\n      set route-map-out-vpnv4 \"HUB2HUB_OUT\"\n      {% endif %}\n      set connect-timer 1\n      set remote-as {{ project.regions[r].as }}\n    next\n    {% endfor %}\n    {% endfor %}\n  end\nend\n\n{% endif %}\n",
            "type": "jinja",
            "variables": [
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Hub-Overlay",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "02-Hub-Overlay",
            "modification_time": "",
            "name": "02-Hub-Overlay",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 02-Hub-Overlay.j2                                                          #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n\n{% for i in project.profiles[profile].interfaces if i.role == 'wan' and i.name is defined %}\nconfig vpn ipsec phase1-interface\n  edit \"EDGE_{{ i.ol_type }}\"\n    set type dynamic\n    set interface \"{{ i.name }}\"\n    set ike-version 2\n    {% if project.cert_auth|default(true) %}\n    set authmethod signature\n    set certificate \"{{ project.edge_cert_template|default('Hub') }}\"\n    {% else %}\n    set psksecret {{ project.psk|default('S3cr3t!') }}\n    {% endif %}\n    set peertype any\n    set proposal aes256gcm-prfsha256 aes256-sha256\n    {% if project.intrareg_advpn|default(true) %}\n    set auto-discovery-sender enable\n    {% else %}\n    set auto-discovery-sender disable\n    set exchange-interface-ip enable\n    {% endif %}    \n    set encapsulation vpn-id-ipip\n    set exchange-ip-addr4 {{ loopback|ipaddr('address') }}\n    set add-route disable\n    set network-overlay enable\n    set network-id {{ project.hubs[hostname].overlays[i.ol_type].network_id }}\n    set dpd-retrycount 2\n    set dpd-retryinterval 5\n    set dpd on-idle\n  next\nend\nconfig vpn ipsec phase2-interface\n  edit \"EDGE_{{ i.ol_type }}\"\n    set phase1name \"EDGE_{{ i.ol_type }}\"\n    set proposal aes256gcm\n    set keepalive enable\n  next\nend\nconfig system interface\n  edit \"EDGE_{{ i.ol_type }}\"\n    set vrf {{ pe_vrf }}\n  next\nend\n{% endfor %}\n",
            "type": "jinja",
            "variables": [
              "hostname",
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Hub-Routing",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "03-Hub-Routing",
            "modification_time": "",
            "name": "03-Hub-Routing",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 03-Hub-Routing.j2                                                          #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n{% set vrf_rt_as = project.vrf_rt_as|default('65000') %}\n\nconfig router community-list\n  edit \"SLA_OK\"\n    config rule\n      edit 1\n        set action permit\n        set match \"{{ project.regions[region].as }}:99\"\n      next\n    end\n  next\nend\nconfig router route-map\n  edit \"LOCAL_REGION\"\n    config rule\n      edit 1\n        {# Do not advertise to EBGP peers (outside the region #}\n        set set-community \"no-export\"\n      next\n    end\n  next\nend\nconfig router bgp\n  set as {{ project.regions[region].as }}\n  set router-id {{ loopback|ipaddr('address') }}\n  set keepalive-timer 15\n  set holdtime-timer 45\n  set ibgp-multipath enable\n  set ebgp-multipath enable\n  set recursive-next-hop enable\n  set recursive-inherit-priority enable\n  config neighbor-group\n    edit \"EDGE\"\n      set soft-reconfiguration-vpnv4 enable\n      set advertisement-interval 1\n      set next-hop-self enable\n      set remote-as {{ project.regions[region].as }}\n      set interface \"Lo\"\n      set update-source \"Lo\"\n      {% if project.intrareg_advpn|default(true) %}\n      set route-reflector-client-vpnv4 enable\n      {% else %}\n      set route-reflector-client-vpnv4 disable\n      {% endif %}      \n    next\n  end\n  config neighbor-range\n    edit 1\n      set prefix {{ project.lo_summary }}\n      set neighbor-group \"EDGE\"\n    next\n  end\n  config network\n    edit 1\n      set prefix {{ project.lo_summary }}\n      set route-map \"LOCAL_REGION\"\n    next\n    {% set network_to_advertise = [] %}\n    {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined and i.advertise|default(true) %}\n      {% if not i.ip in network_to_advertise %}\n        {{ network_to_advertise.append(i.ip) or \"\" }}\n      {% endif %}\n    {% endfor %}\n\n    {% for i in network_to_advertise if i|length %}\n      edit {{ loop.index + 1 }}\n        set prefix {{ i|ipaddr(0) }}\n      next\n    {% endfor %}\n    end\n  config vrf\n    edit \"{{ pe_vrf }}\"\n      set role pe\n    next\n    {% for v in project.regions[region].vrfs %}\n    edit \"{{ v.id }}\"\n      set role \"ce\"\n      set rd \"{{ vrf_rt_as }}:{{ v.id }}\"\n      set import-rt \"{{ vrf_rt_as }}:{{ v.id }}\"\n      set export-rt \"{{ vrf_rt_as }}:{{ v.id }}\"\n    next\n    {% endfor %}\n  end\nend\n\n{% if project.overlay_stickiness|default(true) %}\nconfig router policy\n  {% for i in project.profiles[profile].interfaces if i.role == 'wan' and i.name is defined %}\n  edit {{ loop.index }}\n    set input-device \"EDGE_{{ i.ol_type }}\"\n    set output-device \"EDGE_{{ i.ol_type }}\"\n    set dst {{ project.lan_summary }}\n  next\n  {% endfor %}\nend\n{% endif %}\n\nconfig router static\n  edit 101\n    set dst {{ project.lan_summary }}\n    set blackhole enable\n    set vrf \"{{ pe_vrf }}\"\n    set comment \"Avoid potential leak of corporate traffic to underlay\"\n  next\n  edit 102\n    set dst {{ project.lo_summary }}\n    set blackhole enable\n    set vrf \"{{ pe_vrf }}\"\n  next\nend\n",
            "type": "jinja",
            "variables": [
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Hub-Underlay",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI Template",
            "id": "01-Hub-Underlay",
            "modification_time": "",
            "name": "01-Hub-Underlay",
            "provision": "",
            "scopetype": "adom",
            "script": "{# 01-Hub-Underlay.j2                                                         #}\n{# Release: 7.2                                                               #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# -------------------------------------------------------------------------- #}\n{# Disclaimer: Normally, this file is not supposed to be edited by users.     #}\n{# -------------------------------------------------------------------------- #}\n\n{% import 'Project' as project with context %}\n\n{% set pe_vrf = project.regions[region].pe_vrf|default(1) %}\n{% set vrf_leak_summary = project.vrf_leak_summary|default('10.200.255.0/24') %}\n\n{# General settings #}\nconfig system settings\n  set location-id {{ loopback|ipaddr('address') }}\n  set tcp-session-without-syn enable  \n  set allow-subnet-overlap enable\nend\nconfig system global\n  {% if not project.profiles[profile].ha|default(false) and hostname is defined %}\n  set hostname {{ hostname }}\n  {% endif %}\nend\n\n{# Loop: Configure underlay interfaces #}\n{% for i in project.profiles[profile].interfaces if i.name is defined %}\nconfig system interface\n  edit \"{{i.name}}\"\n    {# IP #}\n    {% if i.ip is defined %}\n    {% if i.ip == 'dhcp' %}\n    set mode dhcp\n    {%  else %}\n    set mode static\n    set ip {{ i.ip }}\n    {% endif %}\n    {% endif %}\n\n    {# VRF #}\n    {% if i.vrf is defined %}\n    set vrf {{ i.vrf }}\n    {% else %}\n    set vrf {{ pe_vrf }}\n    {% endif %}\n\n    {# VLAN #}\n    {% if i.vlanid is defined and i.parent is defined %}\n    set vdom \"root\"\n    set type vlan\n    set vlanid {{ i.vlanid }}\n    set interface {{ i.parent }}\n    {% endif %}\n\n    {# Other settings #}\n    {% if i.role == 'wan' %}\n    set role wan\n    {% endif %}\n    {% if i.role == 'lan' %}\n    set role lan\n    set device-identification enable\n    {% endif %}\n    set allowaccess {{ 'ping' if not i.access|default(false) else i.access }}\n  next\nend\n\n{# VRF Leak #}\n{% if i.vrf is defined and i.allow_dia|default(false) %}\n  {# Configure software vdom-link interface if model is VM #}\n  {% if i.leak_npu_link|default('') == '' %}\n  config system vdom-link\n    edit \"vrf{{ i.vrf }}_leak\"\n    next\n  end\n  config system interface\n    edit \"vrf{{ i.vrf }}_leak0\"\n      set type vdom-link\n      set vrf {{ pe_vrf }}\n      set vdom 'root'\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n    edit \"vrf{{ i.vrf }}_leak1\"\n      set type vdom-link\n      set vrf {{ i.vrf }}\n      set vdom 'root'\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n  end\n  {# Configure vlan interfaces on top of npu link if model is HW #}\n  {% else %}\n  config system interface\n    edit \"vrf{{ i.vrf }}_leak0\"\n      set type vlan\n      set vlanid {{ 4000 + i.vrf }}\n      set interface \"{{i.leak_npu_link}}0\"\n      set vrf {{ pe_vrf }}\n      set vdom 'root'\n      set mode static\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n    edit \"vrf{{ i.vrf }}_leak1\"\n      set type vlan\n      set vlanid {{ 4000 + i.vrf }}\n      set interface \"{{i.leak_npu_link}}1\"\n      set vrf {{ i.vrf }}\n      set vdom 'root'\n      set mode static\n      set ip {{ vrf_leak_summary|ipaddr((i.vrf * 2))|ipaddr('address') }}/31\n      set allowaccess ping\n    next\n  end\n  {% endif %}\n  {# Add a default route to pe_vrf for each vrf #}\n  config router static\n    edit {{ 10000 + i.vrf }}\n      set gateway {{ vrf_leak_summary|ipaddr((i.vrf * 2 + 1))|ipaddr('address') }}    \n      set device vrf{{ i.vrf }}_leak1\n    next\n  end\n\n  {# Configure a zone for easier policy management of vrf leaking #}\n  {% if project.create_vrf_leak_zone|default(true) and i.role == 'lan' %}\n  config system zone\n    edit \"{{ project.pevrf_leak_zone|default('pevrf_leak_zone') }}\"\n      append interface \"vrf{{ i.vrf }}_leak0\"\n    next\n    edit \"{{ project.vrf_leak_zone|default('vrfs_leak_zone') }}\"\n      append interface \"vrf{{ i.vrf }}_leak1\"\n    next\n  end\n  {% endif %}\n{% endif %}\n\n{# End Loop: Configure underlay interfaces #}\n{% endfor %}\n\n{# Loopback for incoming health-check probes #}\nconfig system interface\n  edit \"Lo-HC\"\n    set vdom \"root\"\n    set type loopback\n    set vrf {{ pe_vrf }}\n    set ip {{ project.hub_hc_server|default('10.200.99.1') }}/32\n    set allowaccess ping\n  next\n  {# Main Loopback #}\n  edit \"Lo\"\n    set vdom \"root\"\n    set type loopback\n    set vrf {{ pe_vrf }}\n    set ip {{ loopback|ipaddr('address') }}/32\n    set allowaccess ping\n  next\nend\n\n{# Create LAN Zone #}\n{% set lan_intf = [] %}\n{% if project.create_lan_zone|default(true) %}\nconfig system zone\n  edit \"{{ project.lan_zone|default('lan_zone') }}\"\n    {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined %}\n    {{  lan_intf.append(i.name) or \"\" }}\n    {% endfor %}\n    set interface {{ lan_intf|join(' ') }}\n  next\nend\n{% endif %}\n\n{# Enable DHCP Server on LAN interfaces #}\n{% if project.create_lan_dhcp_server|default(true) %}\nconfig system dhcp server\n  {% for i in project.profiles[profile].interfaces if i.role == 'lan' and i.name is defined %}\n  {% if i.dhcp_server|default(true) %}\n  edit {{ 10 + loop.index0 }}\n    set dns-service default\n    set default-gateway {{ i.ip|ipaddr('address') }}\n    set netmask {{ i.ip|ipaddr('netmask') }}\n    set interface {{ i.name }}\n    config ip-range\n      edit 1\n        set start-ip {{ i.ip|ipaddr(4)|ipaddr('address') }}\n        set end-ip {{ i.ip|ipaddr(-5)|ipaddr('address') }}\n      next\n    end\n  next\n  {% endif %}\n  {% endfor %}\nend\n{% endif %}\n",
            "type": "jinja",
            "variables": [
              "hostname",
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_template",
      "name": "Project",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a project",
            "id": "Project",
            "modification_time": "",
            "name": "Project",
            "provision": "",
            "scopetype": "adom",
            "script": "{#                            Project Template                                #}\n{# -------------------------------------------------------------------------- #}\n{# This file describes the project: its Regions, Hubs and Device Profiles     #}\n{# Normally, this is the only file that needs to be edited between            #}\n{# different projects                                                         #}\n{# -------------------------------------------------------------------------- #}\n{# Design flavor: \"BGP on Loopback\" (Multi-VRF)                               #}\n{# Please contact your Fortinet representatives for more details              #}\n\n{#\n  Per-device variables used:\n  - Required:\n    - hostname\n    - loopback\n    - profile\n    - region\n    - lan_ip_edu\n    - lan_ip_fin\n    - mpls_wan_ip (whenever the profile includes MPLS link)\n    - mpls_wan_gateway (whenever the profile includes MPLS link)\n  - Optional:\n    - outbandwidth\n    - inbandwidth\n    - shaping_profile\n#}\n\n{# Optional Settings #}\n{% set multireg_advpn = true %}\n{% set cert_auth = false %}\n\n{#  Mandatory Global Definitions #}\n{% set lo_summary = '10.200.0.0/14' %}\n{% set lan_summary = '10.0.0.0/8' %}\n\n{# Regions #}\n{% set regions = {\n    'West': {\n      'as': '65001',\n      'lo_summary': '10.200.1.0/24',\n      'hubs': [ 'site1-H1', 'site1-H2' ],\n      'vrfs': [\n        {\n          'id': 11,\n          'lan_summary': '10.0.0.0/14'\n        },\n        {\n          'id': 12,\n          'lan_summary': '10.0.0.0/14'\n        }\n      ]\n    },\n    'East': {\n      'as': '65002',\n      'lo_summary': '10.200.2.0/24',\n      'hubs': [ 'site2-H1' ],\n      'vrfs': [\n        {\n          'id': 11,\n          'lan_summary': '10.4.0.0/14'\n        },\n        {\n          'id': 12,\n          'lan_summary': '10.4.0.0/14'\n        }\n      ]\n    }\n  }\n%}\n\n{# Device Profiles #}\n{% set profiles = {\n\n    'Silver': {\n      'interfaces': [\n        {\n          'name': 'port1',\n          'role': 'wan',\n          'ol_type': 'ISP1',\n          'ip': 'dhcp',\n          'outbandwidth': outbandwidth,\n          'inbandwidth': inbandwidth,\n          'shaping_profile': shaping_profile,\n          'dia': true\n        },\n        {\n          'name': 'port2',\n          'role': 'wan',\n          'ol_type': 'MPLS',\n          'ip': mpls_wan_ip,\n          'outbandwidth': outbandwidth,\n          'inbandwidth': inbandwidth,\n          'shaping_profile': shaping_profile\n        },\n        {\n          'name': 'port3',\n          'role': 'lan',\n          'vrf': 11,\n          'allow_dia': true,\n          'ip': lan_ip_edu\n        },\n        {\n          'name': 'port4',\n          'role': 'lan',\n          'vrf': 12,\n          'ip': lan_ip_fin\n        }\n      ]\n    },\n\n    'Gold': {\n      'interfaces': [\n        {\n          'name': 'port1',\n          'role': 'wan',\n          'ol_type': 'ISP1',\n          'ip': 'dhcp',\n          'outbandwidth': outbandwidth,\n          'inbandwidth': inbandwidth,\n          'dia': true\n        },\n        {\n          'name': 'port2',\n          'role': 'wan',\n          'ol_type': 'ISP2',\n          'ip': 'dhcp',\n          'outbandwidth': outbandwidth,\n          'inbandwidth': inbandwidth,\n          'dia': true\n        },\n        {\n          'name': 'port3',\n          'role': 'wan',\n          'ol_type': 'MPLS',\n          'ip': mpls_wan_ip,\n          'outbandwidth': outbandwidth,\n          'inbandwidth': inbandwidth\n        },\n        {\n          'name': 'port4',\n          'role': 'lan',\n          'vrf': 11,\n          'allow_dia': true,\n          'ip': lan_ip_edu\n        },\n        {\n          'name': 'port5',\n          'role': 'lan',\n          'vrf': 12,\n          'ip': lan_ip_fin\n        }\n      ]\n    }\n\n  }\n%}\n\n{# Hubs #}\n{% set hubs = {\n\n    'site1-H1': {\n      'lo_bgp': '10.200.1.253',\n      'overlays': {\n        'ISP1': {\n          'wan_ip': '100.64.1.1',\n          'network_id': '11'\n        },\n        'ISP2': {\n          'wan_ip': '100.64.1.9',\n          'network_id': '12'\n        },\n        'MPLS': {\n          'wan_ip': '172.16.1.5',\n          'network_id': '13'\n        }\n      }\n    },\n\n    'site1-H2': {\n      'lo_bgp': '10.200.1.254',\n      'overlays': {\n        'ISP1': {\n          'wan_ip': '100.64.2.1',\n          'network_id': '21'\n        },\n        'ISP2': {\n          'wan_ip': '100.64.2.9',\n          'network_id': '22'\n        },\n        'MPLS': {\n          'wan_ip': '172.16.2.5',\n          'network_id': '23'\n        }\n      }\n    },\n\n    'site2-H1': {\n      'lo_bgp': '10.200.2.253',\n      'overlays': {\n        'ISP1': {\n          'wan_ip': '100.64.4.1',\n          'network_id': '41'\n        },\n        'MPLS': {\n          'wan_ip': '172.16.4.5',\n          'network_id': '43'\n        }\n      }\n    }\n\n  }\n%}",
            "type": "jinja",
            "variables": [
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "mpls_wan_ip",
              "outbandwidth",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_templategroup",
      "name": "Edge-Template",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI template group",
            "id": "Edge-Template",
            "member": [
              "01-Edge-Underlay",
              "02-Edge-Overlay",
              "03-Edge-Routing"
            ],
            "modification_time": "",
            "name": "Edge-Template",
            "scopetype": "adom",
            "variables": [
              "hostname",
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Edge-Overlay",
            "fortimanager_object_cli_template.Edge-Routing",
            "fortimanager_object_cli_template.Edge-Underlay",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_object_cli_templategroup",
      "name": "Hub-Template",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adom": "GNS3",
            "description": "This is a Terraform example to build a CLI template group",
            "id": "Hub-Template",
            "member": [
              "01-Hub-Underlay",
              "02-Hub-Overlay",
              "03-Hub-Routing",
              "04-Hub-MultiRegion"
            ],
            "modification_time": "",
            "name": "Hub-Template",
            "scopetype": "adom",
            "variables": [
              "hostname",
              "inbandwidth",
              "lan_ip_edu",
              "lan_ip_fin",
              "loopback",
              "mpls_wan_ip",
              "outbandwidth",
              "profile",
              "region",
              "shaping_profile"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "fortimanager_exec_workspace_action.lockGNS3",
            "fortimanager_object_cli_template.Hub-MultiRegion",
            "fortimanager_object_cli_template.Hub-Overlay",
            "fortimanager_object_cli_template.Hub-Routing",
            "fortimanager_object_cli_template.Hub-Underlay",
            "fortimanager_object_cli_template.Project",
            "fortimanager_system_global.workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "fortimanager_system_global",
      "name": "workspace",
      "provider": "provider[\"registry.terraform.io/fortinetdev/fortimanager\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "admin_lockout_duration": 10,
            "admin_lockout_method": "ip",
            "admin_lockout_threshold": 10,
            "adom_mode": "normal",
            "adom_rev_auto_delete": "by-revisions",
            "adom_rev_max_backup_revisions": 5,
            "adom_rev_max_days": 30,
            "adom_rev_max_revisions": 120,
            "adom_select": "enable",
            "adom_status": "enable",
            "clone_name_option": "default",
            "clt_cert_req": "disable",
            "console_output": "standard",
            "contentpack_fgt_install": "disable",
            "country_flag": "enable",
            "create_revision": "disable",
            "daylightsavetime": "enable",
            "detect_unregistered_log_device": "enable",
            "device_view_mode": "tree",
            "dh_params": "2048",
            "disable_module": [
              "none"
            ],
            "dynamic_sort_subtable": "false",
            "enc_algorithm": "high",
            "faz_status": "disable",
            "fgfm_ca_cert": "",
            "fgfm_cert_exclusive": "disable",
            "fgfm_local_cert": "",
            "fgfm_ssl_protocol": "tlsv1.2",
            "gui_curl_timeout": 30,
            "gui_polling_interval": 5,
            "ha_member_auto_grouping": "enable",
            "hostname": "fm01",
            "id": "SystemGlobal",
            "import_ignore_addr_cmt": "disable",
            "language": "english",
            "latitude": "",
            "ldap_cache_timeout": 86400,
            "ldapconntimeout": 60000,
            "lock_preempt": "disable",
            "log_checksum": "none",
            "log_checksum_upload": "disable",
            "log_forward_cache_size": 0,
            "longitude": "",
            "max_log_forward": 5,
            "max_running_reports": 1,
            "mc_policy_disabled_adoms": [],
            "multiple_steps_upgrade_in_autolink": "disable",
            "no_copy_permission_check": "enable",
            "normalized_intf_zone_only": "disable",
            "object_revision_db_max": 100000,
            "object_revision_mandatory_note": "disable",
            "object_revision_object_max": 100,
            "object_revision_status": "enable",
            "oftp_ssl_protocol": "tlsv1.2",
            "partial_install": "disable",
            "partial_install_force": "disable",
            "partial_install_rev": "disable",
            "per_policy_lock": "disable",
            "perform_improve_by_ha": "disable",
            "policy_object_icon": "disable",
            "policy_object_in_dual_pane": "disable",
            "pre_login_banner": "disable",
            "pre_login_banner_message": "",
            "private_data_encryption": "disable",
            "remoteauthtimeout": 10,
            "search_all_adoms": "disable",
            "ssl_cipher_suites": [],
            "ssl_low_encryption": "disable",
            "ssl_protocol": [
              "sslv3",
              "tlsv1.0",
              "tlsv1.1",
              "tlsv1.2",
              "tlsv1.3"
            ],
            "ssl_static_key_ciphers": "enable",
            "table_entry_blink": "enable",
            "task_list_size": 2000,
            "tftp": "disable",
            "timezone": "04",
            "tunnel_mtu": 1500,
            "usg": "disable",
            "vdom_mirror": "disable",
            "webservice_proto": [
              "tlsv1.2",
              "tlsv1.3"
            ],
            "workflow_max_sessions": 500,
            "workspace_mode": "normal",
            "workspace_unlock_after_install": "disable"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
